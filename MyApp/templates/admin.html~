{%extends 'base.html'%}
{%block title%}Admin{%endblock%}
{%block content%}
{%if login%}
<h1>Dashboard</h1>
<a id="logout" href="{{url_for('admin')}}">Logout</a>
<p id="email-status" style="display: none;">Email successfully sent!</p>
{%if bookings|length() > 0%}
{%for booking in bookings %}
<div class='message'>
  <p>Inmate_id: {{booking['inmate_id']}}</p>
  <p>timeslot: {{booking['timeslot']}}<p>
  <p>Visitor ID: {{booking['visitor_id']}}</p>
  <p>Visitor email: {{booking['email']}}</p>
    {%if booking['status'] == 'Pending'%}
  <button class="approve-button" data-email="{{booking['email']}}" data-booking-id="{{ booking['booking_id'] }}">Approve</button>
  <button class="decline-button" data-email="{{booking['email']}}" data-booking-id="{{booking['booking_id']}}">Decline</button>
   {%else%}
  <p>status:{{booking['status']}}</p>
   {%endif%}

</div>
{%endfor%}
{%endif%}
{%else%}

<div class="mt-5 py-5" id="login-form-container">
  {%for msg in get_flashed_messages()%}
  <div>{{msg}}</div>
  {%endfor%}

  <form id="login-form" method='post'>
     <label for='password'>Username:</label>
  <br>
  <input class="input" type='text' name='username'
	 placeholder='username'
	 value="{{request.form['username']}}" required></input>
  <br>
  <label for='password'>Password:</label>
  <br>
  <input class="input" type='text' name='password'
	 placeholder='password'
	 value="{{request.form['password']}}" required></input>
  <br>
  <button type="submit">Login</button>
</form>
</div>
{%endif%}
 
{%endblock%}
